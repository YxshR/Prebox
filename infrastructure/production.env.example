# Production Environment Configuration Template
# Copy this file to production.env and replace placeholders with actual values

# Server Configuration
NODE_ENV=production
PORT=3001
API_VERSION=v1

# Database Configuration - Production
DATABASE_URL=${DATABASE_URL}
DATABASE_HOST=${DATABASE_HOST}
DATABASE_PORT=5432
DATABASE_NAME=bulk_email_platform
DATABASE_USER=${DATABASE_USER}
DATABASE_PASSWORD=${DATABASE_PASSWORD}
DATABASE_SSL=true
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_CONNECTION_TIMEOUT=30000

# Redis Configuration - Production
REDIS_URL=${REDIS_URL}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_TLS=true
REDIS_CLUSTER_MODE=true

# Enhanced JWT Security Configuration (Per-User Secrets)
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=bulk-email-platform
JWT_AUDIENCE=platform-users

# Security Configuration
BCRYPT_SALT_ROUNDS=12
SESSION_SECRET=${SESSION_SECRET}
ENCRYPTION_KEY=${ENCRYPTION_KEY}
WEBHOOK_SECRET=${WEBHOOK_SECRET}

# Enhanced OTP Security Configuration
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=3
OTP_RATE_LIMIT_WINDOW=900000
OTP_RATE_LIMIT_MAX=5
OTP_CLEANUP_INTERVAL=300000

# Pricing Protection Configuration
PRICING_JWT_SECRET=${PRICING_JWT_SECRET}
PRICING_JWT_EXPIRES_IN=24h
PRICING_VALIDATION_STRICT=true
PRICING_AUDIT_ENABLED=true

# Phone Verification (Twilio) - Production
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_API_KEY=${TWILIO_API_KEY}
TWILIO_API_SID=${TWILIO_API_SID}
TWILIO_SERVICE_SID=${TWILIO_SERVICE_SID}
TWILIO_PHONE_NUMBER=${TWILIO_PHONE_NUMBER}
TWILIO_WEBHOOK_URL=https://api.yourdomain.com/api/auth/twilio/webhook

# Email Service Provider Configuration - Production
PRIMARY_EMAIL_PROVIDER=amazon-ses
FALLBACK_EMAIL_PROVIDER=sendgrid

# Amazon SES - Production
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=us-east-1
SES_FROM_EMAIL=noreply@yourdomain.com
SES_CONFIGURATION_SET=production-config

# SendGrid - Fallback
SENDGRID_API_KEY=${SENDGRID_API_KEY}
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_WEBHOOK_SECRET=${SENDGRID_WEBHOOK_SECRET}

# Payment Gateway Configuration - Production
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_WEBHOOK_ENDPOINT=https://api.yourdomain.com/api/payments/stripe/webhook

# Razorpay - Alternative
RAZORPAY_KEY_SECRET=${RAZORPAY_KEY_SECRET}
RAZORPAY_KEY_ID=${RAZORPAY_KEY_ID}
RAZORPAY_WEBHOOK_SECRET=${RAZORPAY_WEBHOOK_SECRET}

# AI Service Configuration - Production
OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
OPENROUTER_SITE_URL=https://yourdomain.com
OPENROUTER_SITE_NAME=Your Platform
OPENAI_API_KEY=${OPENAI_API_KEY}
CLAUDE_API_KEY=${CLAUDE_API_KEY}
GEMINI_API_KEY=${GEMINI_API_KEY}

# Application URLs - Production
FRONTEND_URL=https://yourdomain.com
ADMIN_FRONTEND_URL=https://admin.yourdomain.com
API_URL=https://api.yourdomain.com

# CORS Configuration - Production
CORS_ORIGIN=https://yourdomain.com,https://admin.yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Rate Limiting - Enhanced for Production
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Security Headers Configuration
HELMET_ENABLED=true
CSP_ENABLED=true
CSP_REPORT_URI=https://api.yourdomain.com/api/security/csp-report
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# Logging Configuration - Production
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/app/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10
LOG_COMPRESS=true

# Security Monitoring - Enhanced
ENABLE_THREAT_DETECTION=true
SECURITY_ALERT_EMAIL=security@yourdomain.com
SECURITY_WEBHOOK_URL=${SECURITY_WEBHOOK_URL}
FAILED_LOGIN_THRESHOLD=5
FAILED_LOGIN_WINDOW=900000
SUSPICIOUS_ACTIVITY_THRESHOLD=10

# Audit Logging - Enhanced
AUDIT_LOG_RETENTION_DAYS=2555
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_FILE=/var/log/app/audit.log
AUDIT_EVENTS=login,logout,signup,password_change,pricing_access,admin_action

# GDPR Compliance
GDPR_DATA_RETENTION_DAYS=2555
GDPR_EXPORT_EXPIRY_DAYS=30
GDPR_DELETION_GRACE_PERIOD_DAYS=30
GDPR_CONSENT_TRACKING=true

# TLS Configuration - Production
TLS_CERT_PATH=/etc/ssl/certs/server.crt
TLS_KEY_PATH=/etc/ssl/private/server.key
TLS_CA_PATH=/etc/ssl/certs/ca-bundle.crt
TLS_MIN_VERSION=1.2
TLS_CIPHER_SUITES=ECDHE-RSA-AES128-GCM-SHA256,ECDHE-RSA-AES256-GCM-SHA384

# Feature Flags - Production
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PHONE_VERIFICATION=true
ENABLE_AI_TEMPLATES=true
ENABLE_CUSTOM_DOMAINS=true
ENABLE_PRICING_PROTECTION=true
ENABLE_PER_USER_JWT=true
ENABLE_ENHANCED_OTP=true

# Performance Configuration
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=16
CLUSTER_WORKERS=auto

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000
READINESS_CHECK_TIMEOUT=10000

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}

# Monitoring Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics
HEALTH_ENDPOINT=/health
READINESS_ENDPOINT=/ready

# CDN Configuration
CDN_ENABLED=true
CDN_URL=https://cdn.yourdomain.com
CDN_CACHE_TTL=86400
CDN_PURGE_API_KEY=${CDN_PURGE_API_KEY}

# Media Asset Configuration
MEDIA_UPLOAD_MAX_SIZE=10485760
MEDIA_ALLOWED_TYPES=image/jpeg,image/png,image/webp,video/mp4,video/webm
MEDIA_STORAGE_PROVIDER=s3
MEDIA_S3_BUCKET=${MEDIA_S3_BUCKET}
MEDIA_S3_REGION=us-east-1
MEDIA_CDN_ENABLED=true

# Error Tracking
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${SENTRY_RELEASE}
SENTRY_TRACES_SAMPLE_RATE=0.1